### rtorrent

Микросервис для поиска контента по торрентам. Позволяет искать контент на разных торрент-трекерах и скачивать
в специально указанную директорию.

#### Запуск и конфигурация сервиса

Параметры командной строки:

``-verbose,-debug - включить отладочный режим``

Переменные окружения через которые можно задавать настройки:

``RTORRENT_DIRECTORY`` - задать директорию для скачивания torrent-файлов. 
По умолчанию - `/tmp`

#### Поддерживаемые сайты-трекеры

* RuTracker.org
* RUTOR.org

#### API сервиса

API выполнено в виде RPC/protobuf

##### ListTrackers

``rpc ListTrackers(ListTrackersRequest) returns (ListTrackersResponse);``

Метод для получения списка всех возможных трекеров. Для каждого трекера приходят следующие поля в структуре `ListTrackersResponse`:
* `Id` - текстовый уникальный идентификатор трекера
* `Name` - human-readable имя сервиса
* `LoginRequired` - нужна ли аутентификация на торрент-трекере

##### Search

``rpc Search(SearchRequest) returns (SearchResponse);``

Метод для поиска контента по всему трекеру. Поля запроса `SearchRequest`:
* `Login` - логин на сайте трекера (не обязательно)
* `Password` - пароль (не обязательно)
* `Text` - поисковый запрос
* `Captcha` - содержимое капчи, если предыдущий запрос потребовал капчу для логина на трекере (не обязательно)
* `Tracker` - идентификатор трекера для поиска

Поля ответа `SearchResponse`:
* `SessionID` - идентификатор сессии поиска, нужен по сути лишь для метода Download
* `Code` - код ошибки ( 0 - все ок, 1 - нужна капча, 2 - ошибка)
* `ErrorReason` - код ошибки
* `CapcthaURL` - URL капчи, если Code == 1
* `Results` - список торрентов

##### Download

``rpc Download(DownloadRequest) returns (DownloadResponse);``

Метод запускает скачивание торрент-файла в директорию, указанную при старте сервиса. Поля запроса `DownloadRequest`:
* `SessionID` - ID сессии, возвращается на метод Search
* `DownloadLink` - закодированная ссылка для скачивания, из ответа на Search

Поля ответа `DownloadResponse`:
* `DownloadStarted` - запущено ли скачивание
* `ErrorReason` - текст ошибки, если нет